---
- type: replace
  path: /releases/-
  value:
    name: bosh-softlayer-cpi
    version: 30.0.0
    url: https://s3.amazonaws.com/bosh-softlayer-cpi-pipeline/bosh-softlayer-cpi-30.0.0.tgz
    sha1: 47b811e3ba7625f6a89372c6c3109e17e3f00bab

- type: replace
  path: /resource_pools/name=vms/stemcell?
  value:
    url: https://s3.amazonaws.com/bosh-softlayer-stemcells-bluemix-candidate-container/light-bosh-stemcell-97.0.1-bluemix-xen-ubuntu-xenial-go_agent.tgz
    sha1: 0cf1f95ec1cf7c0758a0a882a0040621492f0cdb

- type: replace
  path: /resource_pools/name=vms/cloud_properties?
  value:
    datacenter: ((sl_datacenter))
    domain: ((sl_vm_domain))
    hostname_prefix: ((sl_vm_name_prefix))
    ephemeral_disk_size: 100
    cpu: 4
    memory: 8192
    max_network_speed: 100
    deployed_by_boshcli: true
    hourlyBillingFlag: true

- type: replace
  path: /disk_pools/name=disks/disk_size
  value: 100_000

- type: replace
  path: /disk_pools/name=disks/cloud_properties?
  value:
    iops: 3000
    snapshotSpace: 20

- type: replace
  path: /instance_groups/name=bosh/jobs/-
  value:
    name: registry
    release: bosh

- type: replace
  path: /instance_groups/name=bosh/properties/nats/address?
  value: 127.0.0.1

- type: replace
  path: /instance_groups/name=bosh/properties/softlayer?
  value:
    username: ((sl_username))
    api_key: ((sl_api_key))

- type: replace
  path: /instance_groups/name=bosh/jobs/-
  value: &cpi_job
    name: softlayer_cpi
    release: bosh-softlayer-cpi

- type: replace
  path: /instance_groups/name=bosh/properties/director/cpi_job?
  value: softlayer_cpi

- type: replace
  path: /cloud_provider/template?
  value: *cpi_job

- type: replace
  path: /cloud_provider/ssh_tunnel?
  value:
    host: ((sl_director_fqn))
    port: 22
    user: root
    private_key: ((ssh.private_key))

- type: replace
  path: /cloud_provider/properties/softlayer?
  value:
    username: ((sl_username))
    api_key: ((sl_api_key))
    ssh_public_key: ((ssh.public_key))
    ssh_public_key_fingerprint: ((ssh.public_key_fingerprint))

- type: replace
  path: /variables/-
  value:
    name: ssh
    type: ssh

- type: replace
  path: /variables/-
  value:
    name: registry_password
    type: password
